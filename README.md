# mobile-companion-for-performance

## Introduction

This is a WIP experiment for a MCP server tool which enables users to use natural language with MCP-enabeld chatbots to:

- Record startup traces of their Android apps.
- Analyze the traces and get relevant method information from them.

The purpose of this project is learning about ModelContextProtocol and exploring how much can be achieved through vibe-coding. Most of the C# code was generated by GitHub Copilot in agend mode using `Claude 3.7 Sonnet` model.

## Using the MCP tool

### Prerequisites

- dotnet-sdk `9.0.100`
- dotnet-trace `9.0.621003+ebd1db46a2395bd7de706694ff54f1c9526951d7`
- dotnet-dsrouter `9.0.621003+ebd1db46a2395bd7de706694ff54f1c9526951d7`
- ANDROID_NDK `27.2.12479018`
- VSCode `1.99.3` (with GitHub Copilot - Agent mode + GPT-4o model)
- Connected physical Android devices

### Starting the server

- From repo root run `dotnet run --project MC4P/MC4P.csproj`

### Configuring the agent

- Open VSCode and Copilot chat
- Click the tool icon in the char and select `Add MCP server`
- Select `HTTP`
- Enter `http://localhost:3001/sse`
- Choose a name like `mc4p`
- This should add the following in `settings.json` file:

```json
"mcp": {
    "servers": {
        "mc4p": {
            "type": "sse",
            "url": "http://localhost:3001/sse"
        }
    }
}
```

- The tool icon should display the number of available tools (7)

### Using the tool

- Open an android project and use the following prompt to run the exposed methods:

```txt
Record new startup trace of .NET Android app using MobileCompanionForPerformance tool
```

- This should invoke `RecordStartupTraceOnAndroid` method on the server and start the sequence of actions that will lead to recording a startup trace and examining the collected information from it.
